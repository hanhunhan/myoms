<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title> 管理系统</title>
<link rel=stylesheet href="./Tpl/css/global.css" type="text/css">
<link rel=stylesheet href="./Tpl/css/mainPage.css" type="text/css">
 		<script type="text/javascript" src="./Public/validform/js/jquery-1.9.1.min.js"></script>

		<script type="text/javascript" src="./Public/validform/js/Validform_v5.3.2.js"></script>
		
		<script language="javascript" type="text/javascript" src="./Public/My97DatePicker/WdatePicker.js"></script>

		<link rel="stylesheet" href="./Public/validform/css/style.css" type="text/css" media="all" />
		<link rel="stylesheet" href="./Public/validform/css/validateForm.css" type="text/css" media="all" />
</head>
<body>
    <div class="box" id="interestManage">

	     <div class="box-tit"><h3>表单管理</h3></div>
	     <div class="box-con" >
		 <a href="{:U('Show/viewForm')}">表单管理 </a> > <a href="#">表单编辑 </a> 
	    	<div class="c-tit"><h4>{$menutitle}<em class="xing">*为必填项。</em></h4></div>
	              <iframe name="pxiframe" id="pxiframe" width="80%" style="display:none"></iframe>
	              <form method="post" id= "formManage" target="pxiframe" action="{$action}">
	                 <div class="bd">				
	                        <table class="table2" width="98%">
	                            <tr>
	                                <td width="30%"><em class="xing">*</em>界面标题：</td>
	                                <td>
	                                	<input type="text" name="FORMTITLE" id="FORMTITLE" value="{$forminfo.FORMTITLE}" datatype="s" nullmsg="请输入界面标题！" errormsg="界面标题必须为字符串！"/>
	                                	<div class="info">
	                                    	<span class="Validform_checktip"></span>
	                                    	<span class="dec">
	                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
	                                    	</span>
	                                    </div>
	                                </td>
	                                
	                            </tr>
	                            <tr>
	                                <td><em class="xing">*</em>表单类型：</td>
	                                <td>
	                                    <input type='radio' name='FORMTYPE' value='GRID' datatype="*" nullmsg="请选择表单类型！"
	                                    <if condition="$todo eq add">
	                                    	checked
	                                    </if> 
	                                    <if condition="($todo eq edit) AND ($forminfo.FORMTYPE eq GRID)">
	                                    	checked
	                                    </if>

	                                    >GRID
	                                    <input type='radio' name='FORMTYPE' value='FORM' 
	                                    <if condition="($todo eq edit) AND ($forminfo.FORMTYPE eq FORM)">
	                                    	checked
	                                    </if>
	                                    >FORM

	                                    <div class="info">
	                                		<span class="Validform_checktip"></span>
	                                		<span class="dec">
	                                			<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
	                                		</span>
	                                	</div>
	                                </td>
	                                
                                </tr>
                                <tr>
	                                <td><em class="xing">*</em>数据源：</td>
	                                <td>
	                                	<input type="text" name="SQLTEXT" id="SQLTEXT" value="{$forminfo.SQLTEXT}" 
	                                	datatype="s" nullmsg="请输入数据源！" errormsg="必须为字符串！"/>
	                                	<div class="info">
	                                    	<span class="Validform_checktip"></span>
	                                    	<span class="dec">
	                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
	                                    	</span>
	                                    </div>
	                                </td>
	                                	
                                </tr>
                                <tr>
	                                <td>
	                                	<em class="xing">*</em>主键：
	                                </td>
	                                <td>
	                                	<input type="text" name="PKFIELD" id="PKFIELD" value="{$forminfo.PKFIELD}"  
	                                	datatype="s" nullmsg="请输入主键！" errormsg="必须为字符串！"/>
	                                	<div class="info">
	                                    	<span class="Validform_checktip"></span>
	                                    	<span class="dec">
	                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
	                                    	</span>
	                                    </div>
	                                </td>
	                                
                                </tr>
                                <tr>
                                    <td><em class="xing">*</em>编辑：</td>
                                    <td>
                                        <input type='radio' name='EDITABLE' value='-1' datatype="*" nullmsg="请选择是否编辑！"
                                        <if condition="$todo eq add">
	                                    	checked
	                                    </if> 

                                        <if condition="($forminfo.EDITABLE eq -1) AND ($todo eq edit)">checked</if>
                                        >允许

                                        <input type='radio' name='EDITABLE' value='0' 
                                        <if condition="($forminfo.EDITABLE eq 0) AND ($todo eq edit)">checked</if>
                                        >否
                                        <div class="info">
	                                    	<span class="Validform_checktip"></span>
	                                    	<span class="dec">
	                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
	                                    	</span>
	                                    </div>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td><em class="xing">*</em>新增：</td>
                                    <td>
                                        <input type='radio' name='ADDABLE' value='-1' datatype="*" nullmsg="请选择是否新增！"
                                        <if condition="$todo eq add">
	                                    	checked
	                                    </if> 
                                        <if condition="($forminfo.ADDABLE eq -1) AND ($todo eq edit)">checked</if>
                                        >允许
                                        <input type='radio' name='ADDABLE' value='0' 
                                        <if condition="($forminfo.ADDABLE eq 0) AND ($todo eq edit)">checked</if>
                                        >否
                                        <div class="info">
	                                    	<span class="Validform_checktip"></span>
	                                    	<span class="dec">
	                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
	                                    	</span>
	                                    </div>
                                    </td>
                                    
                                </tr>
								<tr>
                                    <td><em class="xing">*</em>删除：</td>
                                    <td>
                                        <input type='radio' name='DELABLE' value='-1' datatype="*" nullmsg="请选择是否删除！"
                                        <if condition="$todo eq add">
	                                    	checked
	                                    </if> 
                                        <if condition="($forminfo.DELABLE eq -1) AND ($todo eq edit)">checked</if>
                                        >允许
                                        <input type='radio' name='DELABLE' value='0' 
                                        <if condition="($forminfo.DELABLE eq 0) AND ($todo eq edit)">checked</if>
                                        >否
                                        <div class="info">
	                                    	<span class="Validform_checktip"></span>
	                                    	<span class="dec">
	                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
	                                    	</span>
	                                    </div>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td><em class="xing">*</em>过滤：</td>
                                    <td>
                                        <input type='radio' name='FILTERABLE' value='-1' datatype="*" nullmsg="请选择是否过滤！"
                                        <if condition="$todo eq add">
	                                    	checked
	                                    </if>
                                        <if condition="($forminfo.FILTERABLE eq -1) AND ($todo eq edit)">checked</if>
                                        >允许
                                        <input type='radio' name='FILTERABLE' value='0' 
                                        <if condition="($forminfo.FILTERABLE eq 0) AND ($todo eq edit)">checked</if>
                                        >否
                                        <div class="info">
	                                    	<span class="Validform_checktip"></span>
	                                    	<span class="dec">
	                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
	                                    	</span>
	                                    </div>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td><em class="xing">*</em>排序：</td>
                                    <td>
                                        <input type='radio' name='SORTABLE' value='-1' datatype="*" nullmsg="请选择是否排序！"
                                        <if condition="$todo eq add">
	                                    	checked
	                                    </if>
                                        <if condition="($forminfo.SORTABLE eq -1) AND ($todo eq edit)">checked</if>
                                        >允许
                                        <input type='radio' name='SORTABLE' value='0' 
                                        <if condition="$forminfo.SORTABLE eq 0 AND ($todo eq edit)">checked</if>
                                        >否
                                        <div class="info">
	                                    	<span class="Validform_checktip"></span>
	                                    	<span class="dec">
	                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
	                                    	</span>
	                                    </div>
                                    </td>
                                    
                                 </tr>
                                 <tr>
                                    <td><em class="xing">*</em>显示详细信息：</td>
                                    <td>
                                        <input type='radio' name='SHOWDETAIL' value='-1' datatype="*" nullmsg="请选择是否显示详细信息！"
                                        <if condition="$todo eq add">
	                                    	checked
	                                    </if>
                                        <if condition="($forminfo.SHOWDETAIL eq -1) AND ($todo eq edit)">checked</if>
                                        >允许
                                        <input type='radio' name='SHOWDETAIL' value='0'
                                        <if condition="($forminfo.SHOWDETAIL eq 0) AND ($todo eq edit)">checked</if>
                                        >否

                                        <div class="info">
	                                    	<span class="Validform_checktip"></span>
	                                    	<span class="dec">
	                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
	                                    	</span>
	                                    </div>
                                    </td>
                                 </tr>
                                 <tr>
                                    <td><em class="xing">*</em>显示方式：</td>
                                    <td>
                                        <select name='GRIDMODE'>
                                            <option value='1' datatype="*" nullmsg="请选择显示方式！" <if condition="$forminfo.GRIDMODE eq 1">selected</if>>grid（编辑/显示）</option>
                                            <option value='2' <if condition="$forminfo.GRIDMODE eq 2">selected</if>>grid（显示）+form（编辑）</option>
                                        </select>

                                        <div class="info">
	                                    	<span class="Validform_checktip"></span>
	                                    	<span class="dec">
	                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
	                                    	</span>
	                                    </div>    
                                    </td>                                    
                                </tr>
								<tr>
                                    <td>网格宽度：</td>
                                    <td>
                                        <input type="text" name="WIDTH" id="WIDTH" value="{$forminfo.WIDTH}" /><label id="WIDTHinfo" style='margin-left:10px;'></label>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>标签宽度：</td>
                                    <td>
                                        <input type="text" name="LABELWIDTH" id="LABELWIDTH" value="{$forminfo.LABELWIDTH}" /><label id="LABELWIDTHinfo" style='margin-left:10px;'></label>
                                    </td>
                                    
                                 </tr>

                                 <tr>
                                    <td>日志路径：</td>
                                    <td>
                                        <input type="text" name="LOGPATH" id="LOGPATH" value="{$forminfo.LOGPATH}" /><label id="LOGPATHinfo" style='margin-left:10px;'></label>
                                    </td>
                                    
                                 </tr>
                                 <tr>
                                    <td>INC路径：</td>
                                    <td>
                                        <input type="text" name="INCPATH" id="INCPATH" value="{$forminfo.INCPATH}" /><label id="INCPATHinfo" style='margin-left:10px;'></label>
                                    </td>
                                   
                                 </tr>
                                  <tr>
                                    <td>图片路径：</td>
                                    <td>
                                        <input type="text" name="IMGPATH" id="IMGPATH" value="{$forminfo.IMGPATH}" /><label id="IMGPATHinfo" style='margin-left:10px;'></label>
                                    </td>
                                    
                                 </tr>
                                 <tr>
                                    <td>是否保存错误日志：</td>
                                    <td>
                                         <input type='radio' name='SAVEERRLOG' value='-1' 
                                         <if condition="($forminfo.SAVEERRLOG eq -1) AND ($todo eq edit)">checked</if> 
                                         />允许
                                        <input type='radio' name='SAVEERRLOG' value='0' 
                                        <if condition="$todo eq add">
	                                    	checked
	                                    </if>
                                        <if condition="($forminfo.SAVEERRLOG eq 0) AND ($todo eq edit)">checked</if> 
                                        />否
                                    </td>
                                    
                                 </tr>
                                <tr>
                                    <td>删除条件：</td>
                                    <td>
                                        <input type="text" name="DELCONDITION" id="DELCONDITION" value="{$forminfo.DELCONDITION}" /><label id="DELCONDITIONinfo" style='margin-left:10px;'></label>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>编辑条件：</td>
                                    <td>
                                        <input type="text" name="EDITCONDITION" id="EDITCONDITION" value="{$forminfo.EDITCONDITION}" /><label id="EDITCONDITION" style='margin-left:10px;'></label>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>插入前执行SQL：</td>
                                    <td>

                                        <textarea name="BISQL" id="BISQL" cols="40" rows="6">{$forminfo.BISQL}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>插入后执行SQL：</td>
                                    <td>
                                        <textarea name="AISQL" id="AISQL" cols="40" rows="6">{$forminfo.AISQL}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>更新前执行SQL：</td>
                                    <td>
                                        <textarea name="BUSQL" id="BUSQL" cols="40" rows="6">{$forminfo.BUSQL}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>更新后执行SQL：</td>
                                    <td>
                                        <textarea name="AUSQL" id="AUSQL" cols="40" rows="6">{$forminfo.AUSQL}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>删除前执行SQL：</td>
                                    <td>
                                        <textarea name="BDSQL" id="BDSQL" cols="40" rows="6">{$forminfo.BDSQL}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>删除后执行SQL：</td>
                                    <td>
                                        <textarea name="ADSQL" id="ADSQL" cols="40" rows="6">{$forminfo.ADSQL}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>插入在功能按钮之后的html语句<small>（grid方式）</small>：</td>
                                    <td>
                                        <textarea name="GABTN" id="GABTN" cols="40" rows="6">{$forminfo.GABTN}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>替换原有功能按钮的html语句<small>（grid方式）</small>：</td>
                                    <td>
                                        <textarea name="GCBTN" id="GCBTN" cols="40" rows="6">{$forminfo.GCBTN}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>显示底部按钮：</td>
                                    <td>
                                        <input type='radio' name='SHOWBOTTOMBTN' value='-1' 
										<if condition="$todo eq add">
	                                    	checked
	                                    </if> 		
                                        <if condition="($forminfo.SHOWBOTTOMBTN eq -1) AND ($todo eq edit)">checked</if>
                                         />允许
                                        <input type='radio' name='SHOWBOTTOMBTN' value='0'
                                        
                                        <if condition="($forminfo.SHOWBOTTOMBTN eq 0) AND ($todo eq edit)">checked</if> 
                                        />否
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>插入在数据之后的html语句<small>（form方式）</small>：</td>
                                    <td>
                                        <textarea name="FORMAFTERDATA" id="FORMAFTERDATA" cols="40" rows="6">{$forminfo.FORMAFTERDATA}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>插入在数据之前的html语句<small>（form方式）</small>：</td>
                                    <td>
                                        <textarea name="FORMBEFOREDATA" id="FORMBEFOREDATA" cols="40" rows="6">{$forminfo.FORMBEFOREDATA}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>插入在数据之后的html语句<small>（GRID方式） </small>：</td>
                                    <td>
                                        <textarea name="GRIDAFTERDATA" id="GRIDAFTERDATA" cols="40" rows="6">{$forminfo.GRIDAFTERDATA}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>插入在数据之前的html语句<small>（GRID方式） </small>：</td>
                                    <td>
                                        <textarea name="GRIDBEFOREDATA" id="GRIDBEFOREDATA" cols="40" rows="6">{$forminfo.GRIDBEFOREDATA}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>编辑文本框的最大长度：</td>
                                    <td>
                                        <input type='text' name='MAXLENGTH' id='MAXLENGTH' value='{$forminfo.MAXLENGTH}' /><label id="MAXLENGTHinfo" style='margin-left:10px;'></label>
                                    </td>
                                    <td></td>
                                </tr>
                                 <tr>
                                    <td>显示图形按钮：</td>
                                    <td>
                                         <input type='radio' name='SHOWIMGBTN' value='-1' 
                                         <if condition="($forminfo.SHOWIMGBTN eq -1) AND ($todo eq edit)">checked</if> 
                                         />允许
                                        <input type='radio' name='SHOWIMGBTN' value='0' 
                                        <if condition="$todo eq add">
	                                    	checked
	                                    </if> 
                                        <if condition="($forminfo.SHOWIMGBTN eq 0) AND ($todo eq edit)">checked</if> 
                                        />否
                                    </td>
                                    
                                </tr>
                                 <tr>
                                    <td>错误保存至日志文件：</td>
                                    <td>
                                         <input type='radio' name='LOGERR' value='-1' 
                                         <if condition="($forminfo.LOGERR eq -1) AND ($todo eq edit)">checked</if> 
                                         />允许
                                        <input type='radio' name='LOGERR' value='0'
                                        <if condition="$todo eq add">
	                                    	checked
	                                    </if>  
                                        <if condition="($forminfo.LOGERR eq 0) AND ($todo eq edit)">checked</if> 
                                        />否
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>更改每页显示行数：</td>
                                    <td>
                                        <input type='radio' name='CHANGEROWS' value='-1' 
                                        <if condition="$todo eq add">
	                                    	checked
	                                    </if> 
                                        <if condition="($forminfo.CHANGEROWS eq -1) AND ($todo eq edit)">checked</if> 
                                         />允许
                                        <input type='radio' name='CHANGEROWS' value='0' 
                                        <if condition="($forminfo.CHANGEROWS eq 0) AND ($todo eq edit)">checked</if> 
                                        />否
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>数据源过滤条件：</td>
                                    <td><input type='text' name='SQLTEXTFILTER' id='SQLTEXTFILTER' value='{$forminfo.SQLTEXTFILTER}'/><label id="SQLTEXTFILTERinfo" style='margin-left:10px;'></label></td>
                                    
                                </tr>
                                <tr>
                                    <td>插入在按钮之后的html语句<small>（form方式）</small>：</td>
                                    <td>
                                        <textarea name="FORMAFTERBTN" id="FORMAFTERBTN" cols="40" rows="6">{$forminfo.FORMAFTERBTN}</textarea>
                                    </td>
                                    
                                </tr>
                                <tr>
                                    <td>替换原有功能按钮的html语句<small>（form方式）</small>：</td>
                                    <td>
                                        <textarea name="FORMCHANGEBTN" id="FORMCHANGEBTN" cols="40" rows="6">{$forminfo.FORMCHANGEBTN}</textarea>
                                    </td>
                                    
                                </tr> 	

	                        </table>
	                        <div class="center-btn mt10"  style="margin:20px;"><input type="submit" value="确定" class="btn-a mr50"/><input name="返回" onclick="self.location=document.referrer;" type="button" class="btn-a" value="返回"/></div>
	                        <input type="hidden" name="act" value="{$todo}" />
	                        <input type="hidden" name="refurl" value="{$refurl}" />
	                        <input type="hidden" name="FORMNO"  value="{$forminfo.FORMNO}" />
	                </div>
	              </form>
	     </div>
  </div>
<script type="text/javascript">    
$(function(){
	$("#formManage").Validform({
		showAllError:true,
		tiptype:function(msg,o,cssctl){
			             
			if(!o.obj.is("form")){
				var objtip=o.obj.parents("td").find(".Validform_checktip");
				cssctl(objtip,o.type);
				objtip.text(msg);
				
				var infoObj=o.obj.parents("td").find(".info");
				if(o.type==2){
					infoObj.hide();
				}else{
					if(infoObj.is(":visible")){return;}
					var left=o.obj.offset().left,
						top=o.obj.offset().top;
	
					infoObj.css({
						left:left+120,
						top:top-45
					}).show().animate({
						top:top-35	
					},200);
				}
				
			}else{}	
		}
		
	});
})

</script>    
    
</body>
</html>
