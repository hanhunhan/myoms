<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title> 管理系统</title>
<link rel=stylesheet href="./Tpl/css/global.css" type="text/css">
<link rel=stylesheet href="./Tpl/css/mainPage.css" type="text/css">
	<script type="text/javascript" src="./Public/validform/js/jquery-1.9.1.min.js"></script>

		<script type="text/javascript" src="./Public/validform/js/Validform_v5.3.2.js"></script>
		
		<script language="javascript" type="text/javascript" src="./Public/My97DatePicker/WdatePicker.js"></script>

		<link rel="stylesheet" href="./Public/validform/css/style.css" type="text/css" media="all" />
		<link rel="stylesheet" href="./Public/validform/css/validateForm.css" type="text/css" media="all" />
</head>

<body>
    <div class="box" id="interestManage">
        <div class="box-tit"><h3>字段添加编辑</h3></div>
        <div class="box-con" >
		<a href="{:U('Show/viewForm')}">表单管理 </a> > <a href="{:U('Show/fieldList',"&FORMNO=$FORMNO&formtitle=$formtitle")}">字段管理 </a> > <a href="#">添加编辑 </a> 
        	<div class="c-tit"><h4>{$menutitle}<em class="xing">*为必填项。</em></h4></div>
                <iframe name="pxiframe" id="pxiframe" width="80%" style="display:none"></iframe>
                <form method="post" id="formManage" target="pxiframe" action="{$action}">
                    <div class="bd">				
                        <table class="table2" width="98%">
                            <tr>
                            	<td><em class="xing">*</em>界面编号：</td>
                            	<td>{$FORMNO}</td>
                            </tr>
                            <tr>
                                <td>
                                	<label class="label"><em class="xing">*</em>字段名称</label>：
                                </td>
                                <td>
                                	<input type="text" name="FIELDNAME" id="FIELDNAME" value="{$forminfo.FIELDNAME}" datatype="s" nullmsg="请输入字段名称!" errormsg="字段名称必须为字符串！">

                                	<div class="info">
                                    	<span class="Validform_checktip"></span>
                                    	<span class="dec">
                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
                                    	</span>
                                	</div>
                                </td>
                            </tr>
                            <tr>
                                <td><em class="xing">*</em>字段含义：</td>
                                <td>
                                	<input type="text" name="FIELDMEANS" id="FIELDMEANS" value="{$forminfo.FIELDMEANS}" datatype="s" nullmsg="请输入字段含义!" errormsg="字段含义为字符串！" />
									<div class="info">
                                    	<span class="Validform_checktip"></span>
                                    	<span class="dec">
                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
                                    	</span>
                                	</div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                	<label class="label"><em class="xing">*</em>行号</label>：
                                </td>
                                <td>
                                	<input type="text" name="LINENO" id="LINENO" value="{$forminfo.LINENO}" 
                                	datatype="n" nullmsg="请输入行号！" errormsg="行号必须为数字！" />

                                	<div class="info">
                                    	<span class="Validform_checktip">行号必须为数字！</span>
                                    	<span class="dec">
                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
                                    	</span>
                                    </div>	
                                </td>
                            </tr>
                            <tr>
                                <td>
                                	<em class="xing">*</em>列号：
                                </td>
                                <td>
                                	<input type="text" name="COLNO" id="COLNO" value="{$forminfo.COLNO}"  datatype="n" nullmsg="请输入列号！" errormsg="列号必须为数字！" />
									<div class="info">
                                    	<span class="Validform_checktip">列号必须为数字！</span>
                                    	<span class="dec">
                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
                                    	</span>
                                    </div>	
                                </td>
                            </tr>
                            <tr>
                            	<td>
                                	<em class="xing">*</em>字段类型：
                                </td>
                                <td>
                                	<select name = "FIELDTYPE">
                                		<option value="1" 
                                		<if condition ="$forminfo.FIELDTYPE eq 1">selected</if>
                                			>文字
                                		</option>
                                		<option value="2" 
                                		<if condition ="$forminfo.FIELDTYPE eq 2">selected</if>
                                			>数字
                                		</option>
                                		<option value="3" 
                                		<if condition ="$forminfo.FIELDTYPE eq 3">selected</if>
                                			>日期
                                		</option>
										<option value="31" 
                                		<if condition ="$forminfo.FIELDTYPE eq 31">selected</if>
                                			>时间
                                		</option>
                                		<option value="4" 
                                		<if condition ="$forminfo.FIELDTYPE eq 4">selected</if>
                                			>逻辑
                                		</option>
                                		<option value="5" 
                                		<if condition ="$forminfo.FIELDTYPE eq 5">selected</if>
                                			>备注
                                		</option>
										<option value="6" 
                                		<if condition ="$forminfo.FIELDTYPE eq 6">selected</if>
                                			>身份证
                                		</option>
										<option value="7" 
                                		<if condition ="$forminfo.FIELDTYPE eq 7">selected</if>
                                			>邮箱
                                		</option>
										<option value="8" 
                                		<if condition ="$forminfo.FIELDTYPE eq 8">selected</if>
                                			>手机号码
                                		</option>
										<option value="9" 
                                		<if condition ="$forminfo.FIELDTYPE eq 9">selected</if>
                                			>checkbox raido  select 等
                                		</option>
                                	</select>

                                </td>	
                            </tr>
                            <tr>
                            	<td>
                                	<em class="xing">*</em>只读：
                                </td>
                                <td>
                                	<input type='radio' name='READONLY' value='-1' 
                                    <if condition="($forminfo.READONLY eq -1) AND ($todo eq edit)">checked</if>
                                    >允许
                                    <input type='radio' name='READONLY' value='0'
                                    <if condition="$todo eq add">
                                    	checked
                                    </if>
                                    <if condition="($forminfo.READONLY eq 0) AND ($todo eq edit)">checked</if>
                                    >否

                                </td>
                            </tr>
                            <tr>
                            	<td>
                                	<em class="xing">*</em>非空：
                                </td>
                                <td>
                                	<input type='radio' name='NOTNULL' value='-1' 
                                    <if condition="($forminfo.NOTNULL eq -1) AND ($todo eq edit)">checked</if>
                                    >允许
                                    <input type='radio' name='NOTNULL' value='0'
                                    <if condition="$todo eq add">
                                    	checked
                                    </if>
                                    <if condition="($forminfo.NOTNULL eq 0) AND ($todo eq edit)">checked</if>
                                    >否

                                </td>
                            </tr>
                            <tr>
                            	<td>
                                	<em class="xing">*</em>网格可见：
                                </td>
                                <td>
                                	<input type='radio' name='GRIDVISIBLE' value='-1'  
                                	<if condition="$todo eq add">
                                    	checked
                                    </if>
                                    <if condition="($forminfo.GRIDVISIBLE eq -1) AND ($todo eq edit)">checked</if>
                                    >允许
                                    <input type='radio' name='GRIDVISIBLE' value='0'
                                    <if condition="($forminfo.GRIDVISIBLE eq 0) AND ($todo eq edit)">checked</if>
                                    >否

                                </td>
                            </tr>
                            <tr>
                            	<td>
                                	<em class="xing">*</em>页面可见：
                                </td>
                                <td>
                                	<input type='radio' name='FORMVISIBLE' value='-1' 
                                	<if condition="$todo eq add">
                                    	checked
                                    </if>
                                    <if condition="($forminfo.FORMVISIBLE eq -1) AND ($todo eq edit)">checked</if>
                                    >允许
                                    <input type='radio' name='FORMVISIBLE' value='0'
                                    <if condition="($forminfo.FORMVISIBLE eq 0) AND ($todo eq edit)">checked</if>
                                    >否

                                </td>
                            </tr>
                            <tr>
                            	<td>
                                	<em class="xing">*</em>排序：
                                </td>
                                <td>
                                	<input type='radio' name='SORT' value='-1' 
                                	<if condition="$todo eq add">
                                    	checked
                                    </if>
                                    <if condition="($forminfo.SORT eq -1) AND ($todo eq edit)">checked</if>
                                    >允许
                                    <input type='radio' name='SORT' value='0'
                                    <if condition="($forminfo.SORT eq 0) AND ($todo eq edit)">checked</if>
                                    >否

                                </td>
                            </tr>
                            <tr>
                            	<td>
                                	<em class="xing">*</em>过滤：
                                </td>
                                <td>
                                	<input type='radio' name='FILTER' value='-1'
                                	<if condition="$todo eq add">
                                    	checked
                                    </if>
                                    <if condition="($forminfo.FILTER eq -1) AND ($todo eq edit)">checked</if>
                                    >允许
                                    <input type='radio' name='FILTER' value='0'
                                    <if condition="($forminfo.FILTER eq 0) AND ($todo eq edit)">checked</if>
                                    >否

                                </td>
                            </tr>
                            <tr>
                            	<td>
                                	<em class="xing"></em>字段长度：
                                </td>
                                <td>
                                	<input type="text" ignore="ignore" name="FIELDLENGTH" id="FIELDLENGTH" value="{$forminfo.FIELDLENGTH}"
                                	datatype="n" nullmsg="请输入字段长度！" errormsg="字段长度必须为数字！"
									
                                	/>

                                    <div class="info">
                                    	<span class="Validform_checktip">字段长度必须为数字！</span>
                                    	<span class="dec">
                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
                                    	</span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                            	<td>
                                	<em class="xing"></em>编辑框长度：
                                </td>
                                <td>
                                	<input type="text" ignore="ignore" name="EDITLENGTH" id="EDITLENGTH" value="{$forminfo.EDITLENGTH}"datatype="n" nullmsg="请输入编辑框长度！" errormsg="编辑框必须为数字！"/>

                                    <div class="info">
                                    	<span class="Validform_checktip">编辑框长度必须为数字！</span>
                                    	<span class="dec">
                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
                                    	</span>
                                    </div>
                                </td>
                            </tr>	
                            <tr>
                            	<td>
                                	<em class="xing"></em>编辑框最大长度：
                                </td>
                                <td>
                                	<input type="text" ignore="ignore" name="EDITMAXLENGTH" id="EDITMAXLENGTH" value="{$forminfo.EDITMAXLENGTH}"datatype="n" nullmsg="请输入编辑框最大长度！" errormsg="编辑框最大长度必须为数字！"/>

                                    <div class="info">
                                    	<span class="Validform_checktip">编辑框最大长度必须为数字！</span>
                                    	<span class="dec">
                                    		<s class="dec1">&#9670;</s><s class="dec2">&#9670;</s>
                                    	</span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                            	<td>
                                	默认值：
                                </td>
                                <td>
                                	<input type="text" name="DEFAULTVALUE" id="DEFAULTVALUE" value="{$forminfo.DEFAULTVALUE}"/>
                                </td>
                            </tr>
                            <tr>
                            	<td>
                                	<em class="xing">*</em>编辑类型：
                                </td>
                                <td>
                                	<select name = "EDITTYPE">
                                		<option value="1" 
                                		<if condition ="$forminfo.EDITTYPE eq 1">selected</if>
                                			>textbox
                                		</option>
                                		<option value="12" 
                                		<if condition ="$forminfo.EDITTYPE eq 12">selected</if>
                                			>数字编辑
                                		</option>
                                		<option value="13" 
                                		<if condition ="$forminfo.EDITTYPE eq 13">selected</if>
                                			>日期编辑
                                		</option>
                                		<option value="131" 
                                		<if condition ="$forminfo.EDITTYPE eq 131">selected</if>
                                			>时间编辑
                                		</option>
                                		<option value="21" 
                                		<if condition ="$forminfo.EDITTYPE eq 21">selected</if>
                                			>listbox(sql)
                                		</option>
                                		<option value="22" 
                                		<if condition ="$forminfo.EDITTYPE eq 22">selected</if>
                                			>listbox(array)
                                		</option>
                                		<option value="23" 
                                		<if condition ="$forminfo.EDITTYPE eq 23">selected</if>
                                			>listbox(sql树形显示)
                                		</option>
                                		 
                                		<option value="31" 
                                		<if condition ="$forminfo.EDITTYPE eq 31">selected</if>
                                			>checkbox (sql)
                                		</option>
										<option value="32" 
                                		<if condition ="$forminfo.EDITTYPE eq 32">selected</if>
                                			>checkbox (array)
                                		</option>
                                		<option value="41" 
                                		<if condition ="$forminfo.EDITTYPE eq 41">selected</if>
                                			>radio(sql)
                                		</option>
                                		<option value="42" 
                                		<if condition ="$forminfo.EDITTYPE eq 42">selected</if>
                                			>radio(array)
                                		</option>
                                		<option value="5" 
                                		<if condition ="$forminfo.EDITTYPE eq 5">selected</if>
                                			>textarea
                                		</option>
                                		<option value="6" 
                                		<if condition ="$forminfo.EDITTYPE eq 6">selected</if>
                                			>password
                                		</option>
										<option value="7" 
                                		<if condition ="$forminfo.EDITTYPE eq 7">selected</if>
                                			>附件
                                		</option>

                                	</select>
                                </td>
                            </tr>
                            <tr>
                            	<td>下拉列表SQL:</td>
                            	<td>
                            		<textarea name="LISTSQL" id="LISTSQL" cols="40" rows="6">{$forminfo.LISTSQL}</textarea>
                            	</td>
                            </tr>
                            <tr>
                            	<td>
                            		小数点后位数:
                            	</td>
                            	<td>
                                             <input type="text" name="DECLENGTH" id="DECLENGTH" 
                                                    <if condition ="$todo eq add">
                                                        value = 0
                                                    </if>
                                                    <if condition = "$todo eq edit">
                                                        value = "{$forminfo.DECLENGTH}"
                                                     </if>   
                                             />
                                    </div>
                            	</td>
                            </tr>
                            <tr>
                            	<td><em class="xing">*</em>对齐方式:</td>
                            	<td>
                            		<input type='radio' name='ALIGN' value='left' 
                                    <if condition="($forminfo.ALIGN eq left) AND ($todo eq edit)">checked</if>
                                    >左
                                    <input type='radio' name='ALIGN' value='center'
                                    <if condition="$todo eq add">
                                    	checked
                                    </if>
                                    <if condition="($forminfo.ALIGN eq center) AND ($todo eq edit)">checked</if>
                                    >中
                                    <input type='radio' name='ALIGN' value='right'
                                    <if condition="($forminfo.ALIGN eq right) AND ($todo eq edit)">checked</if>
                                    >右
                            	</td>
                            </tr>
                            <tr>
                            	<td>编辑格式:</td>
                            	<td>
                            		<input type="text" name="EDITFORMAT" id="EDITFORMAT" value="{$forminfo.EDITFORMAT}" />
                            	</td>
                            </tr>
                            <tr>
                            	<td>下拉列表字符串：</td>
                            	<td>
                            		<textarea name="LISTCHAR" id="LISTCHAR" cols="40" rows="6">{$forminfo.LISTCHAR}</textarea>
                            	</td>
                            </tr>
                            <tr>
                            	<td>关联下拉字段:</td>
                            	<td>
                            		<textarea name="PARENTCOL" id="PARENTCOL" cols="40" rows="6">{$forminfo.PARENTCOL}</textarea>
                            	</td>
                            </tr>				
                            <tr>
								<td>帮助内容：</td>
								<td>
									<textarea name="HELPTEXT" id="HELPTEXT" cols="40" rows="6">{$forminfo.HELPTEXT}</textarea>
								</td>
                            </tr>
                            <tr>
                            	<td>字段转换：</td>
                            	<td>
                            		<textarea name="TRANSFER" id="TRANSFER" cols="40" rows="6">{$forminfo.TRANSFER}</textarea>
                            	</td>
                            </tr>				
                            <tr>
                            	<td>GRID TD属性:</td>
                            	<td>
                            		<textarea name="GRIDTD" id="GRIDTD" cols="40" rows="6">{$forminfo.GRIDTD}</textarea>
                            	</td>
                            </tr>
                            <tr>
                            	<td>INPUT属性：</td>
                            	<td>
                            		<textarea name="INPUTPROPERTY" id="INPUTPROPERTY" cols="40" rows="6">{$forminfo.INPUTPROPERTY}</textarea>
                            	</td>	
                            </tr>
                            <tr>
                            	<td><em class="xing">*</em>数据库关联：</td>
                            	<td>
                            		<input type="radio" name="DBBOUND" id="DBBOUND" value="-1"
                            		<if condition="$todo eq add">checked</if>
                            		<if condition="($forminfo.DBBOUND eq -1) AND ($todo eq edit)">checked</if>
                            		>允许
                            		<input type="radio" name="DBBOUND" id="DBBOUND" value="0"
                            		<if condition="($forminfo.DBBOUND eq 0) AND ($todo eq edit)">checked</if>
                            		>否
                            	</td>
                            </tr>
                            <tr>
                            	<td>字段校验脚本：</td>
                            	<td>
                            		<textarea name="CHKADD" id="CHKADD" cols="40" rows="6">{$forminfo.CHKADD}</textarea>
                            	</td>
                            </tr>				
                            <tr>
                            	<td>字段校验错误提示：</td>
                            	<td>
                            		<textarea name="CHKADDERRMSG" id="CHKADDERRMSG" cols="40" rows="6">{$forminfo.CHKADDERRMSG}</textarea>
                            	</td>
                            </tr>
                            <tr>
                            	<td>计量单位：</td>
                            	<td>
                            		<input type="text" name="UNIT" id="UNIT" value="{$forminfo.UNIT}" />
                            	</td>
                            </tr>
							 <tr>
                            	<td><em class="xing"> </em>虚拟字段：</td>
                            	<td>
                            		<input type="radio" name="VIRTUAL" id="VIRTUAL" value="-1"
                            		
                            		<if condition="($forminfo.VIRTUAL eq -1) AND ($todo eq edit)">checked</if>
                            		>允许
                            		<input type="radio" name="VIRTUAL" id="VIRTUAL" value="0"
									<if condition="$todo eq add">checked</if>
                            		<if condition="($forminfo.VIRTUAL eq 0) AND ($todo eq edit)">checked</if>
                            		>否
                            	</td>
                            </tr>
                        </table>
                        <div class="center-btn mt10"  style="margin:20px;"><input type="submit" value="确定" class="btn-a mr50"/><input name="返回" onclick="self.location=document.referrer;" type="button" class="btn-a" value="返回"/></div>
                        <input type="hidden" name="act" value="{$todo}" />
                        <input type="hidden" name="refurl" value="{$refurl}" />
                    </div>
                </form>
        </div>
    </div>
<script type="text/javascript">    
$(function(){
	$("#formManage").Validform({
		showAllError:true,
		tiptype:function(msg,o,cssctl){
			             
			if(!o.obj.is("form")){
				var objtip=o.obj.parents("td").find(".Validform_checktip");
				cssctl(objtip,o.type);
				objtip.text(msg);
				
				var infoObj=o.obj.parents("td").find(".info");
				if(o.type==2){
					infoObj.hide();
				}else{
					if(infoObj.is(":visible")){return;}
					var left=o.obj.offset().left,
						top=o.obj.offset().top;
	
					infoObj.css({
						left:left+120,
						top:top-45
					}).show().animate({
						top:top-35	
					},200);
				}
				
			}else{}	
		}
		
	});
})

</script>    
</body>
</html>
